# **패키지(Package)**
<br>

## **Go 패키지**
* Go는 패키지를 통해 코드의 모듈화, 코드의 재사용 기능을 제공한다.
* Go는 패키지를 사용해서 작은 단위의 컴포넌트를 작성하고, 이러한 작은 패키지들을 활용해서 프로그램을 작성할 것을 권장한다.

## **Main 패키지**
일반적인 패키지는 라이브러리로서 사용되지만 ```Main``` 이라고 명명된 패키지는 **Go Compiler** 에 의해 특별하게 인식된다.

패키지명이 ```Main``` 인 경우, 컴파일러는 해당 패키지를 공유 라이브러리가 아닌 **실행** 프로그램으로 만든다.

그리고 이 ```Main``` 패키지 안에 **main()** 함수가 프로그램의 시작점 즉 **Entry Point**가 된다. 

## **패키지 Import**
다른 패키지를 프로그램에서 사용하기 위해서는 **import** 를 사용하여 패키지를 포함시킨다. 

예를 들어, Go의 표준 라이브러리인 **fmt** 패키지를 사용하기 위해여, import "fmt" 와 같이 해당 패키지를 포함시킬 것을 선언해준다.
``` go
package main

import "fmt"

func main() {
    fmt.Println("Hello") // fmt 패키지의 Println() 함수를 호출하여 사용
}
```
>GOROOT 환경변수를 Go 설치시 자동으로 시스템에 설정되지만, GOPATH는 사용자가 지정해 주어야 한다.

## **패키지 Scope**
패키지 내에는 함수, 구조체, 인터페이스, 메서드 등이 존재하는데, 이들의 이름이 첫문자를 대문자로 시작하면 이는 **public** 으로 사용할 수 있다.

반면, 이름이 소문자로 시작혀면 이는 **non-public** 으로 패키지 내부에서만 사용될 수 있다. 

## **패키지 init 함수**
개발자가 패키지를 작성할 때, 패키지 실해시 처음으로 호출되는 init() 함수를 작성할 수 있다. 

즉 init 함수는 패키지가 로드되면서 실행하는 함수로 별도의 호출 없이 자동으로 호출된다.
``` go
package testlib

var pop map[string]string

func init() {
    pop = make(map[string]string)
}
```

## **alias**
경우에 따라 패키지를 import 하면서 단지 그 패키지 안에 init() 함수만을 호출하고자 하는 케이스가 있다. 

이런 경우는 패키지 import 시 _ 라는 alias 를 지정한다. 
``` go
package main
import _ "other/xlib"
```

만약 패키지 이름이 동일하지만, 서로 다른 버전 혹은 서로 다른 위치에서 로딩하고자 할 때는, 패키지 alias를 사용해서 구분 가능하다.
``` go
import (
    mongo "other/mongo/db"
    mysql "other/mysql/db"
)
func main() {
    mondb := mongo.Get()
    mydb := mysql.Get()
}
```

## **사용자 정의 패키지 생성**
개발자는 사용자 정의 패키지를 만들어 재사용 가능한 컴포넌트를 만들어 사용할 수 있다. 

사용자 정의 라이브러리 패키지는 일반적으로 폴더를 하나 만들고 그 폴더 안에 .go 파일을 만들어 구성한다. 

하나의 서브 폴더안에 있는 .go 파일들은 동일한 패키지명을 가지며, 패키지명은 해당 폴더의 이름과 같게 한다. 

즉, 해당 폴더에 있는 여러 *.go 파일들은 하나의 패키지로 묶인다.

> 시스템은 패키지가 있는 위치를 찾기 위해 GOROOT와 GOPATH에 있는 각 루트폴더의 src 밑에 폴더를 순서대로 찾게 된다. 